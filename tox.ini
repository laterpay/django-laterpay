[tox]
envlist =
	{py27,py34,py35}-{dj18,dj19,dj110,dj111}-{lpclient4,lpclient5},
	{py35}-{djmaster}-{lpclient4,lpclient5},
	cov,
	flake8,

[testenv]
deps =
	-r{toxinidir}/requirements-test.txt
	dj18: Django>=1.8,<1.9
	dj19: Django>=1.9,<1.10
	dj110: Django>=1.10,<1.11
	dj111: Django
	djmaster: https://github.com/django/django/archive/master.tar.gz
	lpclient4: laterpay-client>=4.1.0,<5
	lpclient5: laterpay-client>=5.0.0,<6
ignore_outcome =
	djmaster: True
commands =
	python setup.py test

[testenv:cov]
basepython = python2.7
passenv = TRAVIS TRAVIS_JOB_ID TRAVIS_BRANCH
commands =
	coverage run --source djlaterpay setup.py test
	coverage report
pip_pre =
	dj111: True

[flake8]
ignore = E126, E127, E128, E402

[testenv:flake8]
basepython = python2.7
commands =
	flake8 --max-line-length 250 --exclude=.tox,setup.py,build,dist,.env
